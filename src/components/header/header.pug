include ../button/button
include ../logo/logo

mixin header({isUserAuthorized, items} = {})
  -
    const defaultItems = [
      {"content": "О нас"},
      {"content": "Услуги", "submenu": [{"content": "Услуга_1"}, {"content": "Услуга_2"}]},
      {"content": "Вакансии"},
      {"content": "Новости"},
      {"content": "Соглашения", "submenu": [{"content": "Соглашение_1"}, {"content": "Соглашение_2"}]},
    ];
    items = items || defaultItems;

  header.header
    div.header__wrapper
      +logo
      div.header__content-wrapper.header__content-wrapper-menu_state_opened
        div.header__buttons-wrapper.js-header__buttons-wrapper
          button.header__toggle-menu-btn.header__toggle-menu-btn_state_without-js.js-header__toggle-menu-btn(type="button")
            span.header__toggle-menu-icon.header__toggle-menu-icon_state_opened menu
            span.header__toggle-menu-icon.header__toggle-menu-icon_state_closed expand_less
          if (isUserAuthorized)
            span.header__user-name.js-header__user-name Юлий Цезарь
          else
            a.header__show-auth-btn.header__show-auth-btn_state_without-js(href="auth.html") person
            div.header__auth-wrapper
              div.header__login-button-wrapper
                +button({"isLogin": true, "view": "bordered", "height": "low", "content": "войти", "href": "sign-in.html"})
              +button({"isRegister": true, "view": "filled", "height": "low", "content": "зарегистрироваться", "href": "sign-up.html"})
        nav.header__main-nav.js-header__main-nav
          ul.header__nav-list.js-header__nav-list
            each item in items
              li.header__nav-item.js-header__nav-item(
                class = "header__nav-item_margin_small"
                class = item.submenu ? "header__submenu js-header__submenu header__submenu_state_closed" : ""
              )
                a.header__nav-link(class=item.isActive ? "header__nav-link_state_active" : "") !{item.content}
                if(item.submenu)
                  button.header__toggle-submenu-btn.js-header__toggle-submenu-btn.header__toggle-submenu-btn_state_without-js
                    span.header__toggle-submenu-icon.header__toggle-submenu-icon_state_opened expand_more
                    span.header__toggle-submenu-icon.header__toggle-submenu-icon_state_closed expand_less
                  ul.header__submenu-list
                    each subitem in item.submenu
                      li.header__submenu-item
                        a.header__submenu-link !{subitem.content}
